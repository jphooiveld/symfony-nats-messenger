services:
  nats:
    build:
      context: .
    container_name: nats_test
    restart: unless-stopped
    working_dir: /library/tests/functional
    ports:
      - "4222:4222" # client port
      - "6223:6222" # cluster port (changed to avoid conflict)
      - "8223:8222" # monitoring port (changed to avoid conflict)
    volumes:
      - ../../:/library
      - nats-data:/data
volumes:
  nats-data: